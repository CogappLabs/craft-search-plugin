{# CP Sprig component: per-index health cell (documents + connectivity). #}
{% set hydrateEnabled = siToBool(hydrate) %}
{% set enabledFlag = siToBool(enabled) %}

{% if not hydrateEnabled %}
    <div
        sprig
        s-trigger="load"
        s-swap="outerHTML transition:true"
        s-val:hydrate="1"
        s-val:index-id="{{ indexId }}"
        s-val:enabled="{{ enabledFlag ? 1 : 0 }}"
    >
        <span class="light">{{ 'states.checkingConnectionAndDocumentCount'|t('search-index') }}</span>
    </div>
{% else %}
    <div class="si-index-health">
        {% if not enabledFlag %}
            <span class="status"></span> {{ "states.disabled"|t('search-index') }}
        {% elseif connected is same as(true) %}
            <span class="status green" title="{{ 'states.connected'|t('search-index') }}"></span> {{ "states.connected"|t('search-index') }}
        {% elseif connected is same as(false) %}
            <span class="status red" title="{{ errorHint ?? 'errors.connectionError'|t('search-index') }}" {% if errorHint %}data-si-error="{{ errorHint }}"{% endif %}></span> {{ "errors.error"|t('search-index') }}
        {% else %}
            <span class="status"></span> {{ "states.unknown"|t('search-index') }}
        {% endif %}

        <span class="light"> Â· {{ 'labels.documents'|t('search-index') }}: {{ docCount ?? '-' }}</span>
    </div>
{% endif %}
