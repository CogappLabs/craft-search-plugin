{# Sprig component template for cogapp\searchindex\sprig\components\IndexStructure. #}

<div class="flex mb-m flex-center">
    <button sprig type="button" class="btn" s-val:index-id="{{ indexId }}" s-indicator="#index-structure-loading">{{ 'Refresh'|t('search-index') }}</button>
    <span class="spinner htmx-indicator ml-s" id="index-structure-loading" aria-hidden="true"></span>
    <span class="light htmx-indicator ml-s">{{ 'Refreshingâ€¦'|t('search-index') }}</span>
    <span class="light ml-s">{{ 'Fetches the current schema from the search engine'|t('search-index') }}</span>
</div>

{% if result.success %}
    <pre class="code si-code-block">{{ result.schema|json_encode(constant('JSON_PRETTY_PRINT') b-or constant('JSON_UNESCAPED_SLASHES')) }}</pre>
{% else %}
    <pre class="code si-code-block si-code-error">{{ result.message }}</pre>
{% endif %}
