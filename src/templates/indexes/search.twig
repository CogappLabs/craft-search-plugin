{% extends "search-index/_layouts/plugin" %}

{% set title = "Search" %}
{% set selectedSubnavItem = 'search' %}

{% import "_includes/forms" as forms %}

{% block content %}
    {% do view.registerAssetBundle("cogapp\\searchindex\\web\\assets\\searchpage\\SearchPageAsset") %}

    <div id="search-page">
        {# Mode toggle #}
        <div class="btngroup mb-l">
            <button type="button" class="btn active" data-mode="single">Single</button>
            <button type="button" class="btn" data-mode="compare">Compare</button>
        </div>

        {# Single mode #}
        <div id="single-mode">
            <div class="flex mb-m" style="gap:12px;align-items:flex-end">
                <div style="min-width:220px">
                    {{ forms.selectField({
                        label: 'Index',
                        id: 'single-index',
                        options: indexOptions,
                        first: true,
                    }) }}
                </div>
                <div class="flex-grow">
                    {{ forms.textField({
                        label: 'Query',
                        id: 'single-query',
                        placeholder: 'Search…',
                    }) }}
                </div>
                <div style="min-width:80px">
                    {{ forms.textField({
                        label: 'Per Page',
                        id: 'single-perpage',
                        value: 20,
                        type: 'number',
                        min: 1,
                        max: 100,
                        size: 5,
                    }) }}
                </div>
                <div>
                    <button type="button" id="single-search-btn" class="btn submit">Search</button>
                </div>
            </div>

            <div id="single-results"></div>
        </div>

        {# Compare mode #}
        <div id="compare-mode" style="display:none">
            <div class="mb-m">
                {{ forms.checkboxSelectField({
                    label: 'Indexes to compare',
                    id: 'compare-indexes',
                    name: 'compareIndexes',
                    values: [],
                    options: indexOptions,
                }) }}
            </div>

            <div class="flex mb-m" style="gap:12px;align-items:flex-end">
                <div class="flex-grow">
                    {{ forms.textField({
                        label: 'Query',
                        id: 'compare-query',
                        placeholder: 'Search…',
                    }) }}
                </div>
                <div style="min-width:80px">
                    {{ forms.textField({
                        label: 'Per Page',
                        id: 'compare-perpage',
                        value: 20,
                        type: 'number',
                        min: 1,
                        max: 100,
                        size: 5,
                    }) }}
                </div>
                <div>
                    <button type="button" id="compare-search-btn" class="btn submit">Search All</button>
                </div>
            </div>

            <div id="compare-results" class="flex" style="gap:16px;flex-wrap:wrap"></div>
        </div>
    </div>
{% endblock %}
