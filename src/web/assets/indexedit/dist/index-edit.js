(()=>{const i=document.getElementById("search-index-edit-form");if(!i)return;const f=i.dataset.isNew==="true",a=document.getElementById("engineType");function l(e){document.querySelectorAll(".engine-config-fields").forEach(t=>{const d=t.dataset.engine===e;t.classList.toggle("hidden",!d),t.querySelectorAll("input").forEach(c=>{c.disabled=!d})})}a&&(l(a.value),a.addEventListener("change",function(){l(this.value);const e=document.querySelector(`.engine-config-fields[data-engine="${CSS.escape(this.value)}"]`);e&&Craft.initUiElements(e)}));const r=document.getElementById("name"),o=document.getElementById("handle");let g=!f;r&&o&&(r.addEventListener("input",function(){g||(o.value=this.value.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,""))}),o.addEventListener("input",()=>{g=!0})),document.querySelectorAll('#sectionIds input[type="checkbox"]').forEach(e=>{e.addEventListener("change",function(){document.querySelectorAll(`.entry-type-checkbox[data-section="${this.value}"]`).forEach(t=>{t.classList.toggle("hidden",!e.checked)})})});const s=document.getElementById("mode"),u=document.getElementById("synced-sources");if(s&&u){let e=function(){u.classList.toggle("hidden",s.value==="readonly")};s.addEventListener("change",e),e()}const n=document.getElementById("si-toggle-enabled");if(n){const e=n.dataset.indexId,t={enabledNotice:n.dataset.tEnabledNotice??"Index enabled.",disabledNotice:n.dataset.tDisabledNotice??"Index disabled.",toggleError:n.dataset.tToggleError??"Failed to update enabled state."},d=n.querySelector(".lightswitch");d&&$(d).on("change",async()=>{const c=d.classList.contains("on");try{(await Craft.sendActionRequest("POST","search-index/indexes/toggle-enabled",{data:{id:e,enabled:c?1:0}})).data?.success?Craft.cp.displayNotice(c?t.enabledNotice:t.disabledNotice):Craft.cp.displayError(t.toggleError)}catch{Craft.cp.displayError(t.toggleError)}})}})();
