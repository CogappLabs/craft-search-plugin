(()=>{const o=document.getElementById("search-index-edit-form");if(!o)return;const h=o.dataset.isNew==="true",a=document.getElementById("engineType");function s(e){document.querySelectorAll(".engine-config-fields").forEach(t=>{const d=t.dataset.engine===e;t.classList.toggle("hidden",!d),t.querySelectorAll("input").forEach(g=>{g.disabled=!d})})}a&&(s(a.value),a.addEventListener("change",function(){s(this.value);const e=document.querySelector(`.engine-config-fields[data-engine="${CSS.escape(this.value)}"]`);e&&Craft.initUiElements(e)}));const l=document.getElementById("name"),c=document.getElementById("handle");let r=!h;l&&c&&(l.addEventListener("input",function(){r||(c.value=this.value.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_|_$/g,""))}),c.addEventListener("input",()=>{r=!0})),document.querySelectorAll('#sectionIds input[type="checkbox"]').forEach(e=>{e.addEventListener("change",function(){document.querySelectorAll(`.entry-type-checkbox[data-section="${this.value}"]`).forEach(t=>{t.classList.toggle("hidden",!e.checked)})})});const i=document.getElementById("mode"),u=document.getElementById("synced-sources");if(i&&u){let e=function(){u.classList.toggle("hidden",i.value==="readonly")};i.addEventListener("change",e),e()}const n=document.getElementById("si-toggle-enabled");if(n){const e=n.dataset.indexId,t={enabledNotice:n.dataset.tEnabledNotice??"Index enabled.",disabledNotice:n.dataset.tDisabledNotice??"Index disabled.",toggleError:n.dataset.tToggleError??"Failed to update enabled state."},d=n.querySelector(".lightswitch");d&&new MutationObserver(async()=>{const f=d.getAttribute("aria-checked")==="true";try{(await Craft.sendActionRequest("POST","search-index/indexes/toggle-enabled",{data:{id:e,enabled:f?1:0}})).data?.success?Craft.cp.displayNotice(f?t.enabledNotice:t.disabledNotice):Craft.cp.displayError(t.toggleError)}catch{Craft.cp.displayError(t.toggleError)}}).observe(d,{attributes:!0,attributeFilter:["aria-checked"]})}})();
