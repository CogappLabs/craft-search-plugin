(()=>{const r=document.querySelector("table.data.fullwidth"),e={confirmDelete:r?.dataset.tConfirmDelete??"Are you sure you want to delete this index?",confirmFlush:r?.dataset.tConfirmFlush??"Are you sure you want to flush all documents from this index?",syncNotice:r?.dataset.tSyncNotice??"Sync jobs queued.",flushNotice:r?.dataset.tFlushNotice??"Index flushed.",actionError:r?.dataset.tActionError??"Action failed."};document.addEventListener("htmx:afterSettle",o=>{const a=o.detail?.elt;a instanceof HTMLElement&&a.querySelectorAll("[data-si-error]").forEach(t=>{console.error("[Search Index]",t.dataset.siError)})}),document.querySelectorAll(".menu [data-action]").forEach(o=>{o.addEventListener("click",function(a){a.preventDefault();const t=this.dataset.action,n=this.dataset.id;!t||!n||t==="delete"&&!confirm(e.confirmDelete)||t==="flush"&&!confirm(e.confirmFlush)||Craft.sendActionRequest("POST",`search-index/indexes/${t}`,{data:{id:n}}).then(c=>{if(c.data?.success===!1){Craft.cp.displayError(c.data.message||e.actionError);return}t==="delete"?location.reload():Craft.cp.displayNotice(t==="sync"?e.syncNotice:e.flushNotice)}).catch(()=>{Craft.cp.displayError(e.actionError)})})})})();
