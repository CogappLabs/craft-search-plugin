(()=>{const a=document.querySelector("table.data.fullwidth"),t={confirmDelete:a?.dataset.tConfirmDelete??"Are you sure you want to delete this index?",confirmFlush:a?.dataset.tConfirmFlush??"Are you sure you want to flush all documents from this index?",syncNotice:a?.dataset.tSyncNotice??"Sync jobs queued.",flushNotice:a?.dataset.tFlushNotice??"Index flushed.",actionError:a?.dataset.tActionError??"Action failed."};document.querySelectorAll(".menu [data-action]").forEach(c=>{c.addEventListener("click",function(i){i.preventDefault();const e=this.dataset.action,o=this.dataset.id;!e||!o||e==="delete"&&!confirm(t.confirmDelete)||e==="flush"&&!confirm(t.confirmFlush)||Craft.sendActionRequest("POST",`search-index/indexes/${e}`,{data:{id:o}}).then(r=>{if(r.data?.success===!1){Craft.cp.displayError(r.data.message||t.actionError);return}e==="delete"?location.reload():Craft.cp.displayNotice(e==="sync"?t.syncNotice:t.flushNotice)}).catch(()=>{Craft.cp.displayError(t.actionError)})})})})();
